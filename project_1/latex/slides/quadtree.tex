\section{Quadtrees}
\subsection{Introduction}
\begin{frame}
    \frametitle{Quadtrees}
    Divide some given space according to its \emph{particle density}
    \begin{figure}
        \centering
        \resizebox{\textwidth}{!}{%
            \input{tikz/quadtree.tex}
        }
    \end{figure}
\end{frame}

\begin{frame}
    \begin{figure}
        \centering
        \resizebox{.8\textwidth}{!}{%
            \input{tikz/spatial_part.tex}
        }
        \caption{spatial partition}
    \end{figure}
\end{frame}

\subsection{Quadtree \& Morton Curve}
\begin{frame}
    \frametitle{Quadtree \& Morton Curve}
    \textbf{Properties:}
    \begin{itemize}
        \item The four children of a given a node are numbered consecutively
            $0,\dots,3$ \\
        \item When stepping through the levels of the tree towards a given
            point, the numbers of the nodes add up to the points morton key
            (possibly truncated) \\
        \item Points with a common parent node are neighbouring on the morton
            curve
    \end{itemize}
\end{frame}

\begin{frame}
    \begin{figure}
        \centering
        \caption{key = 0b001110}
        \resizebox{.6\textwidth}{!}{%
            \input{tikz/numbered_tree.tex}
        }
    \end{figure}

    \noindent\rule{\textwidth}{1pt}

    \textbf{Notes:}
    \begin{itemize}
        \item max depth of tree $=\frac{\textrm{key length}}{\textrm{dim}}$ \\
        \item Resolution of domain partitioned by the tree $=2^{\textrm{tree
            depth}}-1$
    \end{itemize}
\end{frame}

\begin{frame}
    \begin{figure}
        \centering
        \begin{animateinline}[controls={step,play,stop},buttonsize=10pt]{.5}
            \multiframe{4}{i=1+1}{%
                \resizebox{.7\textwidth}{!}{%
                    \input{tikz/morton_anim.tex}
                }
            }
        \end{animateinline}
        \caption{Connection between keys of node and point}
    \end{figure}
\end{frame}

\subsection{Example}
\begin{frame}
    \textbf{Space Seperation Animation}
    \begin{center}
        \animategraphics[%
            draft,
            % every=3,
            type=png,
            width=.99 \textwidth,
            controls={play,step,stop},
            buttonsize=10pt
        ]{3}{plots/out-}{000}{064}
    \end{center}
\end{frame}


\begin{frame}
    \textbf{Quadtree Construction}
    \begin{center}
        \animategraphics[%
            draft,
            % every=3,
            type=png,
            width=\textwidth,
            controls={play,step,stop},
            buttonsize=10pt
        ]{3}{graphs/extent_out-}{001}{063}
    \end{center}
\end{frame}
